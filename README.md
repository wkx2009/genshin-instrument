# 原神乐器模拟器（风物之诗琴等）

一个基于 Web 技术开发的原神风格乐器模拟器，支持风物之诗琴、镜花之琴、余音等多款原神乐器，包含手动演奏、自动弹奏、转调等核心功能，适配 PC 与移动端，视觉风格贴合原神IP调性。


## 🌟 功能特点
- **多乐器支持**：内置风物之诗琴、镜花之琴（含旧版）、老旧的诗琴、余音、悠可琴、跃律琴，切换乐器自动同步专属配色与音色
- **核心演奏功能**：
  - 手动演奏：键盘/鼠标/触摸触发琴键，支持琴键按下动画与三角装饰同步变色
  - 自动弹奏：自定义 BPM（30-240）与乐谱（支持和弦、延迟标记），一键启停
  - 转调设置：7种调式（自然大调/小调等）+ ±12半音偏移，实时生效
- **视觉体验**：原神风格背景、装饰元素与字体，适配深色模式，响应式布局（PC/移动端）
- **易用控制**：音量调节、乐器快速切换、加载状态提示，操作逻辑简洁


## 📁 项目结构
```
genshin-instrument/
├─ css/                # 样式文件
│  ├─ style.css        # 核心样式（含原神风格、琴键、弹窗等）
├─ img/                # 资源文件
│  ├─ background.jpg   # 原神风格背景图  //（未来会有）
├─ js/                 # 脚本文件
│  ├─ audioManager.js  # 乐器配置与音频路径管理
│  └─ script.js        # 核心逻辑（音频初始化、演奏、转调等）
├─ audio/              # 音频资源（按乐器分类）
│  ├─ 风物之诗琴/       # 风物之诗琴音色文件
│  ├─ 镜花之琴/        # 镜花之琴音色文件
│  └─ ...（其他乐器）
├─ fonts/              # 字体文件
│  ├─ misans.woff2      # MiSans 字体（用于界面文本）
│  └─ ...（其他字体）
├─ index.html          # 主页面
├─ README.md           # 项目说明（本文档）
└─ favicon.ico        # 网站图标
```
## 🚀 快速开始
### 1. 环境准备
- 无需额外依赖，直接通过浏览器打开 `index.html` 即可运行
- 本地开发推荐使用 Python 简易 HTTP 服务（避免跨域问题）：
  ```bash
  # 进入项目根目录
  cd genshin-instrument
  # 启动服务（Python 3.x）
  python -m http.server 8080
  # 浏览器访问 http://localhost:8080
  ```

### 2. 基础操作
- **选择乐器**：点击顶部「乐器选择」下拉框，选择目标乐器（加载完成后自动切换音色与配色）
- **手动演奏**：
  - PC：使用键盘 `Q-W-E-R-T-Y-U`/`A-S-D-F-G-H-J`/`Z-X-C-V-B-N-M` 对应琴键
  - 移动端/PC：点击琴键触发演奏
- **自动弹奏**：
  1. 点击顶部「自动弹奏」按钮，打开弹窗
  2. 输入乐谱（格式：单个琴键空格分隔，和弦用`(qwe)`，延迟用`|3+`）
  3. 设置 BPM（默认60），点击「开始」执行自动演奏
- **转调设置**：点击顶部「转调」按钮，选择调式与半音偏移，点击「应用」生效


## 📚 引用仓库说明
本项目开发过程中，参考了以下两个开源仓库的核心设计与逻辑，在此表示感谢：

### 1. Web框架参考
- **仓库地址**：[haveyouwantto/WindsongLyre-Sim](https://github.com/haveyouwantto/WindsongLyre-Sim)
- **引用内容**：界面设计
- **修改说明**：适配多乐器扩展，优化视觉风格为原神统一调性，新增转调功能

### 2. 乐器音频参考
- **仓库地址**：[Specy/genshin-music](https://github.com/Specy/genshin-music)
- **引用内容**：乐器及音频内容
- **修改说明**：适配多乐器音色加载，新增音频加载进度提示


## 🎨 设计规范
### 1. 视觉风格
- 主色调：原神深靛蓝（`#121a29`）、金色（`#d3bc8e`），乐器专属色从配置中动态读取
- 字体：使用 MiSans 字体（需遵循小米字体使用协议），正文用 `Normal`（400），标题用 `Medium`（500）
- 图标：网站图标为「圆形+♪符号」，贴合音乐主题，尺寸 32×32px

### 2. 版权声明
- **字体版权**：本项目使用 MiSans 字体，版权归小米科技有限责任公司所有，使用遵循《MiSans字体知识产权许可协议》（仓库现版本因加载速度问题不得不删除）
- **原神IP相关**：本项目为非商业同人作品，仅用于学习与交流，原神相关IP与素材版权归米哈游所有
- **开源协议**：本项目基于 MIT 协议开源（或其他协议，根据实际情况修改），引用仓库需遵循对应开源协议


## ⚠️ 注意事项
1. **音频资源**：项目依赖的乐器音频文件需自行准备（或参考引用仓库的音频格式），确保符合版权规范
2. **浏览器兼容性**：推荐使用 Chrome 100+、Firefox 90+、Safari 15+，旧浏览器可能不支持 Web Audio API 或 CSS 特性
3. **MiSans 字体使用**：需在页脚标注「本项目使用 MiSans 字体，版权归小米公司所有」，并保留字体协议中的版权声明


## 🐛 常见问题
1. **图标不显示**：确保 `favicon.ico` 放在项目根目录，或在 `index.html` 中正确声明图标路径
2. **音频加载失败**：检查 `audio/` 文件夹下的音频路径与 `audioManager.js` 中的配置是否一致，避免跨域问题（本地开发推荐用 Python 服务）
3. **自动弹奏无响应**：检查乐谱格式是否正确（仅支持配置的琴键字符），BPM 是否在 30-240 范围内


## 📞 联系方式
- 项目维护：wkx2009(https://github.com/wkx2009)
- 反馈建议：欢迎提交 Issues 或 Pull Request，共同优化项目
